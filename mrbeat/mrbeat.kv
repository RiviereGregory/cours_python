#:import track track
#:import play_indicator play_indicator

MainWidget:
<ControlButton@Button>:

<MainWidget>:
    tracks_layout: tracks_layout
    play_indicator_widget: play_indicator_widget
    BoxLayout:
        orientation: "vertical"
        RelativeLayout:
            size_hint_y: None
            height: dp(60)
            Image:
                source: "images/top_background.png"
                allow_stretch: True
                keep_ratio: False
            Image:
                source: "images/logo.png"
                size_hint_x: None
                width: dp(230)
                allow_stretch: True
                pos_hint: {"x":0}
            BoxLayout:
                size_hint_x: None
                width: dp(120)
                pos_hint: {"center_x":.5}
                ControlButton:
                    text: "PLAY"
                    on_press: root.on_play_button_pressed()
                ControlButton:
                    text: "STOP"
                    on_press: root.on_stop_button_pressed()
            BoxLayout:
                size_hint_x: None
                width: dp(180)
                pos_hint: {"right":1}
                ControlButton:
                    size_hint_x: None
                    width: dp(50)
                    text: "-"
                    on_press: root.bpm -= 5
                Label:
                    text: str(root.bpm)
                ControlButton:
                    size_hint_x: None
                    width: dp(50)
                    text: "+"
                    on_press: root.bpm += 5

        RelativeLayout:
            Image:
                source: "images/background.jpg"
                allow_stretch: True
                keep_ratio: False
            BoxLayout:
                x: dp(16)
                y: dp(16)
                size_hint: None, None
                size: (self.parent.width-dp(32), self.parent.height-dp(32))
                orientation: "vertical"
                PlayIndicatorWidget:
                    id: play_indicator_widget
                    size_hint_y: None
                    height: dp(8)
                    left_align: root.TRACK_STEPS_LEFT_ALIGN
                BoxLayout:
                    id: tracks_layout
                    orientation: "vertical"
